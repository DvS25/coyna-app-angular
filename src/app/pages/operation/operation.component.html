<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;600;700&display=swap" rel="stylesheet">
<div class="innerdash pagetitle" *ngIf="showPage == true">
    <div class="row">
      <div class="col-md-9">
        <h1>Create Operation</h1>
      </div>
        <div class="col-md-3">
          <button class="btn btn-primary" (click)="goBack()"><i class="fa-solid fa-arrow-left"></i> Go Back</button>
        </div>
    </div>
</div><!-- End Page Title -->
<section class="section dashboard" *ngIf="showPage == true">
    <div class="row">
        <div class="innerform">
                    <div class="innerfheader">
                      <h4>Basic Information </h4>
          
                </div>
            <div class="col-md-9">
                <form id="formCreatecompany" class="mb-3 mt-4 commform row" [formGroup]="operationForm"
                      (ngSubmit)="onSubmit()">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="name" class="form-label">Company Name</label>
                            <select class="form-control" formControlName="cName"
                                    (change)="getStoreList($event.target)" [ngClass]="{
                                   'is-invalid': submitted && f['cName'].errors,
                                    'is-valid': submitted && !f['cName'].errors}">

                      
                                <option [value]="item.companyId"
                                        *ngFor="let item of companyList">{{item.name | titlecase}}</option>
                            </select>


                            <span *ngIf="submitted && f['cName'].errors" class="invalid-feedback">
                          <span *ngIf="f['cName'].errors['required']"> Company Name  is required</span>
                          </span>
                        </div>
                        <div class="mb-3">
                            <label for="name" class="form-label">Operations Department</label>
                            <select class="form-control" formControlName="department"
                                    [ngClass]="{
                                   'is-invalid': submitted && f['department'].errors,
                                    'is-valid': submitted && !f['department'].errors}">
                                <option>Back Office Operations</option>
                                <option>In Store Operations</option>
                            </select>

                            <span *ngIf="submitted && f['department'].errors" class="invalid-feedback">
                          <span *ngIf="f['department'].errors['required']"> Department Name  is required</span>
                          </span>
                        </div>

                        <div class="mb-3">
                            <label for="name" class="form-label">Contact Number</label>
                            <input type="text" class="form-control" placeholder=""
                                   formControlName="mobileNo" [ngClass]="{
                                   'is-invalid': submitted && f['mobileNo'].errors,
                                    'is-valid': submitted && !f['mobileNo'].errors}"/>


                            <span *ngIf="submitted && f['mobileNo'].errors" class="invalid-feedback">
                          <span *ngIf="f['mobileNo'].errors['required']"> Mobile Number  is required</span>
                        <span *ngIf="f['mobileNo'].errors['pattern']">Mobile Number is not number</span><br>
                        <span *ngIf="f['mobileNo'].errors['minlength']">Minimum 10 length </span>
                      </span>
                        </div>
                        <div class="mb-3">
                            <label for="name" class="form-label">Username</label>
                            <input type="text" class="form-control" placeholder=""
                                   formControlName="userId" (keyup)="checkUserName($event.target)" [ngClass]="{
                                   'is-invalid': submitted && f['userId'].errors,
                                    'is-valid': submitted && !f['userId'].errors}"/>
                            <span *ngIf="submitted && f['userId'].errors" class="invalid-feedback">
                          <span *ngIf="f['userId'].errors['required']"> User Name  is required</span>
                      </span>
                            <span style="color: #dc3545" *ngIf="isUser">User name is already taken</span>

                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="name" class="form-label">Store Name</label>
                            <select class="form-control" formControlName="store_id"
                                    [ngClass]="{'is-invalid': submitted && f['store_id'].errors}">


                                <option [value]="item.companyId"
                                        *ngFor="let item of storeList">{{item.name | titlecase}}</option>
                            </select>

                            <span *ngIf="submitted && f['store_id'].errors" class="invalid-feedback">
                          <span *ngIf="f['store_id'].errors['required']"> Store  is required</span>
                          </span>
                        </div>
                        <div class="mb-3">
                            <label for="name" class="form-label">User Full Name</label>
                            <input type="text" class="form-control" placeholder=""
                                   formControlName="name" [ngClass]="{
                                   'is-invalid': submitted && f['name'].errors,
                                    'is-valid': submitted && !f['name'].errors}"/>


                            <span *ngIf="submitted && f['name'].errors" class="invalid-feedback">
                          <span *ngIf="f['name'].errors['required']"> User name  is required</span>
                        <span *ngIf="f['name'].errors['pattern']">  Name is only character</span>

                      </span>
                        </div>
                        <div class="mb-3">
                            <label for="name" class="form-label">Email ID</label>
                            <input type="text" class="form-control" placeholder=""
                                   formControlName="email" [ngClass]="{
                                   'is-invalid': submitted && f['email'].errors,
                                    'is-valid': submitted && !f['email'].errors}"/>


                            <span *ngIf="submitted && f['email'].errors" class="invalid-feedback">
                          <span *ngIf="f['email'].errors['required']"> Email  is required</span>
                        <span *ngIf="f['email'].errors['email']">Email is invalid</span>
                      </span>
                        </div>
                        <div class="mb-3">
                            <label for="name" class="form-label">Password</label>
                            <input type="password" class="form-control" placeholder=""
                                   formControlName="password" [ngClass]="{
                                   'is-invalid': submitted && f['password'].errors,
                                    'is-valid': submitted && !f['password'].errors}"/>


                            <span *ngIf="submitted && f['password'].errors" class="invalid-feedback">
                          <span *ngIf="f['password'].errors['required']"> Password  is required</span>
                      </span>
                        </div>
                    </div>
                    <div class="mt-3 mb-3">
                        <button type="submit" class="btn btn-primary btnarraow">Create User<span class="barraow"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<section class="section dashboard" *ngIf="showPage == false">
	<div class="row" style="align-items: center;">
		<div class="col-md-12" style="padding:10px;">
			<h1>Create Operation</h1>
		</div>
	</div>
	<div class="row" style="height: 500px;">
		<div class="col-md-12">
			<div class="alert alert-dismissable alert-danger">
				<strong>Oops!</strong> You dont have access to see this page.
			</div>
		</div>
	</div>
</section>